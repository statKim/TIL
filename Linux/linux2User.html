<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
div {
    margin-bottom: 20px;
    padding : 5px;
    line-height: 30px;
}


.info {
    background-color: #f0f2f5;
    border-left: 5px solid #b8d9f3;
}


</style>
</head>
<body>

<h2>Linux 사용자 관리와 파일 속성 명령어</h2>

<hr color="red">

<h3>1. 사용자와 그룹</h3><p>

<div class="info">
  리눅스는 다중 사용자 시스템<br><br>

  한 대의 리눅스에 여러명이 동시에 접속해서 사용할 수 있는 시스템<br>
  기본적으로 root라는 이름을 가진 슈퍼 유저가 있으며 시스템의 모든 작업을 실행 할 수 있는 권한이 있음<br>
  다중 사용자 시스템인 리눅스에서 사용자를 관리하는 방법 학습<br><br>
  <hr>

  * 모든 사용자는 하나 이상의 그룹에 소속되어 있어야 함<br><br>

</div>

  [1] 사용자 및 그룹 확인<br><br>

<div class="info">
  1-1. 모든 사용자 정보를 확인 할수 있는 명령어<br>

  $vi /etc/passwd<br>
  <img src="images/etc_passwd.PNG"><br>
  각 행의 의미<br>
  사용자 이름:암호:사용자 ID:사용자가 소속된 그룹 ID:전체 이름:홈 디렉터리:기본 셸<br>

  <br><hr><br>

  1-2. 그룹에 속한 사용자 이름<br>
  vi etc/group<br>
  <img src="images/etc_group.PNG"><br>
  각 행의 의미<br>
  그룹명:비밀번호:그룹 id:그룹에 속한 사용자명<br>
</div>
  <br><hr><br>


  [2] 새로운 사용자 <br>
  - 사용자를 생성 할 수 있고, 사용자들을 그룹으로 관리 할수 있음<br>
  - 사용자 계정 생성은 root만 가능<br><br>

<div class="info">
  2-1. 사용자 추가<br>
  # useradd newuser<br><br>

  2-2. 사용자의 비밀번호를 지정하거나 변경<br>
  # passwd newuser<br><br>

  2-3. 사용자의 속성을 변경<br>
  # usermod -g root newuser<br><br>

  2-4. 사용자를 삭제<br>
  # userdel newuser<br><br>

  2-5. 사용자의 암호를 주기적으로 변경하도록 설정<br>
  # chage -m 2 newuser<br>
  - 변경 후 암호를 최소 사용해야 하는 일자<br><br>

  2-6. 현재 사용자가 속한 그룹을 보여줌<br>
  # groups<br>
  # groups newuser<br>
  - newuser가 소속된 그룹을 보여줌<br><br>

  2-7. 새로운 그룹을 생성<br>
  # groupadd newgroup<br><br>

  2-8. 그룹을 삭제<br>
  # groupdel newgroup<br><br>

  2-9. 그룹의 암호를 설정하거나, 그룹의 관리를 수행<br>
  # gpasswd newgroup<br><br>

</div>

<h3><font color="red">2. 파일과 디렉터리의 소유와 허가권</font></h3><p>
  * 자세한 파일 리스트<br>
<img src="images/자세한파일리스트.PNG"><br>

 * 파일 속성<br>
<img src="images/파일속성.PNG"><br>
<br>
[1] 파일과 디렉터리의 소유와 허가권<br>
<div class="info">
1-1. 파일 유형<br>
- 디렉터리일 경우에는 d, 일반적인 파일일 경우에는 -가 표시 <br><br>

1-2. 파일 허가권(Permission)<br>
* r은 read, w는 write, x는 execute의 약자<br><br>

- rw-r--r-- :  “rw-” , “ r--” , “ r--” 3개씩 끊어서 읽음 <br>
- 첫 번째 : “rw-”는 소유자(User)의 파일접근 권한<br>
- 두 번째 : “r--”는 그룹(Group)의 파일접근 권한<br>
- 세 번째 : “r--”는 그 외의 사용자(Other)의 파일접근 권한<br><br>

* sample.txt 파일의 허가권 표현<br>
<img src="images/sample.PNG">
<br>
- 소유자 6의 의미 : 2진수 110 따라서 "rw-"으로 표현<br>
- 그룹의 허가권 4의 의미 : 2진수 100 따라서 "r--"로 표현<br>
- 예시 : 허가권이 754인 경우는 어떻게 해석하나?<br>
  &nbsp;&nbsp; : 'rwxr-xr--', 소유자는 읽고/쓰고/실행 할수 있음, 그룹은 읽고/실행만, 그 외 사용자는 읽기만 가능<br>

<br><br>
1-3. 파일 소유권<br>
- 파일을 소유한 사용자와 그룹 의미<br>
- 파일의 소유권을 변경하는 명령어 : chown<br><br>

1-3-1. 소유권 변경 명령어<br>
#chown 소유권보유사용자 파일명 or 폴더명<br>
#chown centos test<br><br>

1-3-2. 현재 사용자 확인 명령어<br>
#whoami<br><br>

1-3.3. 디렉터로 속성 확인<br>
#ls -l<br>

<br><br>
1.문제 : master라는 새로운 사용자 생성해서 centos라는 일반 user가
  생성한 "김현성.txt" 파일의 내용을 수정해라<br><br>

2.해결책:<br>
  2-1. 1단계 : root 계정으로 master 계정 생성<br>
  # useradd master<br>

  2-2. 2단계 : 생성된 master 계정에 비밀번호 생성<br>
  # passwd master<br>
    passwd 입력창<br>

  2-3. 3단계 : master 계정의 권한을 centos 계정과 동일한 그룹으로 변환<br>
    2-3-1. centos의 그룹을 먼저 확인<br>
      # groups centos<br>
      $ groups centos<br>
    2-3-2. 확인한 centos 계정이 속한 그룹과 동일한 그룹명으로 변경<br>
      # usermod -g centos master<br>
    2-3-3. master 계정의 그룹 확인<br>
      # groups master<br>
      $ groups centos<br>

  2-4. 4단계 : centos의 /home/centos 폴더에 접속 허가권을 master에게 부여<br>
  #chown master /home/centos<br>

  2-5. 5단계 : master로 로그인 후 centos 계정의 /home/centos 경로 하위의 파일 수정<br>
    2-5-1. centos의 폴더의 내용 검색<br>
      $ls -l /home/centos
    2-5-2. 파일 수정 시도<br>
      $vi /home/centos/김현성.txt <br>
      파일 수정<br>
    2-5-3. 수정된 파일 확인<br>
      centos와 master 계정 2개로 확인<br>

</div>



</body>
</html>
